@model IEnumerable<Secure_Bank.Models.Model.Transaction>
@{
    ViewData["Title"] = "İşlem Geçmişi";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>📊 İşlem Geçmişi</h2>
    <div>
        <a href="@Url.Action("Transfer", "Banking")" class="btn btn-success">Yeni Transfer</a>
    </div>
</div>


<div class="card-body">
    @if (Model.Any())
    {
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Tarih & Saat</th>
                        <th>Gönderen</th>
                        <th>Alıcı</th>
                        <th>Miktar</th>
                        <th>Açıklama</th>
                        <th>Tip</th>
                         <th>Detay</th> 
                    </tr>
                </thead>
                <tbody>


                    @foreach (var transaction in Model)
                    {
                        <tr>
                            <td>
                                <small>
                                    @transaction.TransactionDate.ToString("MMM dd, yyyy")<br>
                                    <span class="text-muted">@transaction.TransactionDate.ToString("HH:mm")</span>
                                </small>
                            </td>
                            <td>
                                <span class="badge bg-secondary">@transaction.FromAccount.AccountNumber</span>
                            </td>
                            <td>
                                <span class="badge bg-primary">@transaction.ToAccount.AccountNumber</span>
                            </td>
                            <td>
                                <span class="text-success fw-bold">@transaction.Amount.ToString("N2") TL</span>
                            </td>
                            <td>
                                <small>@(string.IsNullOrEmpty(transaction.Description) ? "No description" : transaction.Description)</small>
                            </td>
                            <td>
                                <span class="badge bg-primary">@transaction.TransactionType.ToString()</span>

                            </td>
                            <td>
                                <a href="@Url.Action("TransactionDetails", "Banking", new { id = transaction.TrId })"
                                   class="btn btn-sm btn-primary">
                                    <i class="bi bi-eye"></i> 
                                </a>
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>

        <div class="mt-3">
            <p class="text-muted">
                <small> @Context.Session.GetString("FullName") adlı kullanıcı için @Model.Count() işlem gösteriliyor</small>
            </p>
        </div>
    }
    else
    {
        <div class="text-center py-5">
            <i class="bi bi-inbox display-1 text-muted"></i>
            <h4 class="mt-3">İşlem bulunamadı</h4>
            <p class="text-muted">Henüz bir transfer işlemi gerçekleştirmemmişsiniz.</p>
            <a href="@Url.Action("Transfer", "Banking")" class="btn btn-success">
                <i class="bi bi-plus-circle"></i> İlk transfer işlemini yapınız👋
            </a>
        </div>
    }
</div>



